/*
 *	Core lootstrap
 */

// Starting with the variables...
	@import (reference) 'lootstrap/core-variables.less';

	// Set any overrides here
		@border-radius:	0;
		@grid-count:	3; // Just using thirds. might as well make it easy.
		@primary:		#d70;
		@secondary:		#07a;
		@dgray:			#3a3936;
		@link-hover: 	@secondary;
		@fast:			0.3s;

// Continue to load the mixins, now that we have our variables.
	// Can either load entire default core-mixins.less file to use all the default mixins...
	@import (reference) 'lootstrap/core-mixins.less';

// With all the mixins covered, load the elements and classes.
	@import 'lootstrap/core-elements.less';
	@import 'lootstrap/core-classes.less';

#top {
	.skip-link();
}

// For those who show their scroll bars, make sure that space is always carved out for it, so that the center alignment doesn't jump between short and long pages.
html {
	overflow-y: scroll;
}
// Set up a little vertical flex to stick the footer to the bottom.
@media screen {
	body {
		display: flex;
		flex-direction: column;
		main {
			flex-grow: 1;
			> .wrapper {
				margin-top: @vr;
				margin-bottom: @vr;
			}
		}
	}
}
a {
	transition-property: background, color, border-color;
	transition-duration: @fast;
}
h3 {
	padding-top: calc( @vr/3 ~'-' 1px );
	border-top: 1px solid @lgray;
	margin-top: @vr/2;
}
h4 {
	padding-top: 0;
	span {
		display: block;
		float: right;
	}
}
main {
	a {
		text-decoration: none;
		border-bottom: 1px dashed @link-hover;
		&:hover {
			text-decoration: none;
			border-bottom-color: @link;
		}
	}
}
.content-section {
	padding-bottom: @vr * 2;
	@media screen and ( min-width: @screen-sm ) {
		& > * {
			max-width: 70rem;
		}
	}
	& > ul {
		max-width: 100%;
		margin-left: 0;
		list-style: none;
		@media ( min-width: @screen-sm ) {
			column-count: 2;
			column-gap: @grid*2;
		}
	}
}



// Set up the site header and footer
#site-header,
#site-footer {
	padding: 0 @vr/2;
	background-color: @dgray;
	background-image: linear-gradient( lighten( @dgray, 5% ) 25%, @black 100% );
	color: @white;
	a {
		color: inherit;
	}
}
#site-identifier {
	font-size: 2.4rem;
	padding-bottom: 0;
	padding-top: 1.2rem;
	@media screen and ( min-width: @screen-sm ) {
		font-size: 3.6rem;
	}
}
#site-footer {
	font-size: @font-size-sm;
	padding: @vr/2;
	p {
		padding-bottom: 0;
	}
}

// make the header-inner a grid row to position the nav elements
.header-inner {
	.grid-row( false ); // from mixins-grid, no need for inner wrappers, here
	padding-bottom: @vr/2;
	h1,
	nav {
		.grid-item( 1 ); // from mixins-grid - note that it's 2/6 because @grid-count, so 1/3
		margin-bottom: 0;
	}
	nav {
		flex-basis: 100% * 2 / 3; // letting LESS calculate the significant digits.
	}
}

// Some really basic nav styles
nav {
	ul {
		// resetting core-elements ul styles
		list-style: none;
		padding-bottom: 0;
		display: flex;
		flex-wrap: wrap;
		margin-left: -@vr/2;
		margin-right: -@vr/2;
	}
	li {
		display: block;
		// align nicely with the site title
		margin-top: @vr/2;
		flex: 1 1 auto;
	}
	a {
		.btn( @link, @primary-over, @link-hover ); // from mixins-buttons
		&.active {
			background-color: @link-hover;
			cursor: default;
		}
		// overriding some of the default .btn styles
		display: block;
		height: auto;
		margin-left: @vr/2;
		margin-right: @vr/2;
	}
	// And since the header gets wider at desktop, might as well tidy up the nav.
	@media screen and ( min-width: @screen-sm ) {
		ul {
			text-align: right;
			display: block;
			margin: 0;
		}
		li {
			display: inline-block;
		}
	}
}


// Quick and simple dropdown for the contact information, based upon hash.
#contact {
	background-color: @secondary;
	color: @secondary-over;
	padding-top: 0;
	padding-bottom: 0;
	max-height: 0;
	overflow: hidden;
	transition-duration: @fast;
	transition-property: max-height, padding;
	.wrapper {
		display: flex;
		justify-content: space-between;
	}
	a {
		display: block;
		flex: 0 0 auto;
		color: inherit;
		border-bottom: 1px dashed fade( @secondary-over, 0 );
		text-decoration: none;
		&:hover {
			border-bottom-color: @secondary-over;
		}
	}
	&:target {
		max-height: @vr*2;
		padding-top: @vr/2;
		padding-bottom: @vr/2;
	}
}

// CV-specific page
.cv {
	#page-title {
		float: left;
	}
	.content-section {
		clear: both;
	}
}
// Originally, this was going to be just for @media print, but ended up leaving it visible all the time.
#cv-contact {
	float: right;
	padding-top: @vr/2;
	padding-bottom: @vr/2;
	text-align: right;
	a,
	&:after {
		display: block;
		border-bottom: 0;
	}
}


// Portfolio detail page links
.project-links {
	.bg-secondary();
	float: right;
	display: flex;
	flex-direction: column;
	align-items: flex-end;
	width: @grid * 16;
	margin-left: @grid * 2;
	margin-bottom: @vr;
	a {
		flex: 1 0 auto;
		font-size: @font-size-lg;
		margin-bottom: @vr/4;
		color: inherit;
		border-bottom-color: @white;
		&:hover {
			border-bottom: 1px solid @white;
		}
		&.back {
			margin-top: @vr;
			margin-bottom: 0;
			font-size: @font-size-sm;
		}
	}
}

.by-the-numbers {
	ul {
		list-style: none;
		margin-left: 0;
	}
	li {
		display: flex;
		align-items: center;
		margin-bottom: @vr/2;
	}
	strong {
		font-size: @vr * 2;
		flex-basis: @grid * 6;
		line-height: 1;
		display: block;
		text-align: right;
		margin-right: @grid;
		color: @secondary;
	}
}


// Main portfolio page
.portfolio {
	// Whenever the screen is wide enough, make us a grid.
	@media screen and ( min-width: @screen-sm ) {
		#main-content {
			display: flex;
			flex-wrap: wrap;
			align-content: flex-start;
			justify-content: flex-start;
		}
	}
	.project {
		height: 18rem;
		width: 100%;
		border: 0;
		flex: 1 1 auto;
		position: relative;
		overflow: hidden;

		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: stretch;

		background-color: @primary;
		background-size: cover;
		background-position: top center;
		color: @primary-over;

		&:after {
			content: "";
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			box-shadow: inset 0 0 1.2rem fade( @dgray, 50% );
		}

		@media ( min-width: @screen-sm ) {
			height: 24rem;
			width: 40rem;
			max-width: 50%;
		}

		img {
			position: absolute;
			width: 100%;
			height: auto;
			opacity: 1;
			transition-duration: @fast;
			transition-property: opacity;
			top: 0;
			opacity: 1;
		}
		h2 {
			flex: 0 0 auto;
			width: 100%;
			padding: @vr/2 @grid;
			text-align: center;
			transition-duration: @fast;
			transition-property: padding-bottom, opacity;
			font-family: @sans;
			font-size: @font-size * 1.5;
			line-height: @line-height * 1.5;
		}
		&:hover {
			background-image: none !important; // important to override inline styles, applied during templating.
			opacity: 1;
			h2 {
				padding-bottom: @vr * 3/2;
				opacity: 1;
			}
			img {
				opacity: 0.1;
			}
			&:after {
				box-shadow-color: fade( @dgray, 20% );
			}
		}
	}
}

// Setting up the nice print styles, primarily for the c.v.
@media print {
	html {
		font-size: @rem-size * 3/4;
	}
	*,
	*:before,
	*:after {
		background-color: white !important;
		color: black !important;
		border-color: black !important;
	}
	#site-header,
	#site-footer {
		display: none;
	}
	#cv-contact {
		&:after {
			content: "617.913.2299";
		}
		.pdf {
			display: none;
		}
	}
	#main-content {
		a {
			border-bottom: 0;
		}
		h3 + ul > li {
			margin-bottom: @vr/4;
		}
	}
	#page-title + .content-section {
		border-top: 1px solid black;
		margin-top: @vr/2;
		padding-top: @vr;
	}
	h2 {
		break-before: always;
		page-break-before: always;
	}
	.content-section.first,
	.content-section:last-child {
		& > h2 {
			break-before: avoid;
			page-break-before: avoid;
		}
	}
}


//body {
//	background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAeAQMAAAAxci3AAAAABlBMVEX///8AAABVwtN+AAAAAnRSTlMANrkpWKEAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVAiZY2AgGzwAAAEcAOFHPV40AAAAAElFTkSuQmCC') repeat left top
//}